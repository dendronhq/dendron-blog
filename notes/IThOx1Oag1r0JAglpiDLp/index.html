<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>Writing a Visual Studio Code Completion Provider</title><meta name="robots" content="index,follow"/><meta name="googlebot" content="index,follow"/><meta name="description" content="An overview of writing VSCode completion providers (intellisense) as an extension developer"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="dendronhq"/><meta name="twitter:creator" content="dendronhq"/><meta property="og:title" content="Writing a Visual Studio Code Completion Provider"/><meta property="og:description" content="An overview of writing VSCode completion providers (intellisense) as an extension developer"/><meta property="og:url" content="https://blog.dendron.so/notes/IThOx1Oag1r0JAglpiDLp/"/><meta property="og:type" content="article"/><meta property="article:published_time" content="9/17/2021"/><meta property="article:modified_time" content="10/26/2021"/><meta property="og:image" content="https://i.imgur.com/Qu2LPJR.png"/><meta property="og:image:alt" content="VSCode Auto completion"/><link rel="canonical" href="https://blog.dendron.so/notes/IThOx1Oag1r0JAglpiDLp/"/><meta name="next-head-count" content="18"/><link rel="preload" href="/_next/static/css/031e929487d7cbf4d6c6.css" as="style"/><link rel="stylesheet" href="/_next/static/css/031e929487d7cbf4d6c6.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-a40ef1678bae11e696dba45124eadd70.js"></script><script src="/_next/static/chunks/webpack-613fd858cdb9cf2af3be.js" defer=""></script><script src="/_next/static/chunks/framework-2f612445bd50b211f15a.js" defer=""></script><script src="/_next/static/chunks/main-c215ebed95a596d02a77.js" defer=""></script><script src="/_next/static/chunks/pages/_app-312bfd48794a1891a5d3.js" defer=""></script><script src="/_next/static/chunks/155-6b9e7c2cacce4839738c.js" defer=""></script><script src="/_next/static/chunks/pages/notes/%5Bid%5D-33b38cdd07e3cb2c17c1.js" defer=""></script><script src="/_next/static/eGF8yDdSuflwTya4OC_9B/_buildManifest.js" defer=""></script><script src="/_next/static/eGF8yDdSuflwTya4OC_9B/_ssgManifest.js" defer=""></script></head><body><div id="__next"><section class="ant-layout" style="width:100%;min-height:100%"><header class="ant-layout-header" style="position:fixed;z-index:1;width:100%;border-bottom:1px solid #d4dadf;height:64px;padding:0 24px 0 2"><div class="ant-row" style="flex:0 0 auto;padding-left:calc((100% - 992px) / 2);height:64px"><div class="ant-col ant-col-xs-5 ant-col-md-5 ant-col-lg-6"></div><div style="padding-left:4px" class="ant-col ant-col-xs-14 ant-col-sm-14 ant-col-md-10 ant-col-lg-10"></div><div style="margin-left:4px;margin-right:4px" class="ant-col ant-col-xs-0 ant-col-sm-0 ant-col-md-8 ant-col-lg-6"></div><div style="margin-left:4px;display:none;align-items:center;justify-content:center" class="ant-col ant-col-xs-4 ant-col-sm-4 ant-col-md-0 ant-col-lg-0"><span role="img" aria-label="menu-unfold" size="32" tabindex="-1" class="anticon anticon-menu-unfold"><svg viewBox="64 64 896 896" focusable="false" data-icon="menu-unfold" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM142.4 642.1L298.7 519a8.84 8.84 0 000-13.9L142.4 381.9c-5.8-4.6-14.4-.5-14.4 6.9v246.3a8.9 8.9 0 0014.4 7z"></path></svg></span></div></div></header><section class="ant-layout site-layout" style="margin-top:64px"><section class="ant-layout site-layout" style="flex-direction:row"><section class="ant-layout site-layout-sidebar" style="flex:0 0 auto;width:calc((100% - 992px) / 2 + 200px);min-width:200px;padding-left:calc((100% - 992px) / 2)"><aside class="ant-layout-sider ant-layout-sider-dark" style="position:fixed;overflow:auto;height:calc(100vh - 64px);flex:0 0 200px;max-width:200px;min-width:200px;width:200px"><div class="ant-layout-sider-children"></div></aside></section><section class="ant-layout side-layout-main" style="max-width:800px;display:initial"><main class="ant-layout-content main-content" role="main" style="padding:0 24px"><div class="ant-row"><div class="ant-col ant-col-24"><div><h1 id="writing-a-visual-studio-code-completion-provider"><a aria-hidden="true" class="anchor-heading" href="#writing-a-visual-studio-code-completion-provider"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Writing a Visual Studio Code Completion Provider</h1>
<p><img src="https://org-dendron-public-assets.s3.amazonaws.com/images/pexels-thisisengineering-3861972.jpg" alt="A photo of a developer with a laptop and 2 monitors, from a top-down view. Monitors display Visual Studio Code windows."></p>
<p>Visual Studio Code (VSCode) provides many powerful features for extension developers. Autocomplete, warnings, tasks, and many more features are included out-of-the-box and are available for extension developers to take advantage of. However, figuring out how you can take advantage of these features as an extension developer can require digging through API documentation to learn the exact behavior. Using the API incorrectly can lead to issues that are hard to debug, as I learned working on the block autocomplete feature for Dendron.</p>
<p>This post is an overview of VSCode autocomplete —also called intellisense— feature from the viewpoint of an extension developer. I especially want to highlight a few pitfalls: VSCode provides defaults for many of the options around autocomplete, but the behavior of these defaults can be confusing if you don't know what they are.</p>
<h3 id="entry-point"><a aria-hidden="true" class="anchor-heading" href="#entry-point"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Entry point</h3>
<p>Your entry point into adding an autocomplete feature is <code>languages.registerCompletionItemProvider</code>. This allows you to attach a function that will generate the options when requested.</p>
<pre class="language-ts"><code class="language-ts">languages<span class="token punctuation">.</span><span class="token method function property-access">registerCompletionItemProvider</span><span class="token punctuation">(</span>
  <span class="token string">"markdown"</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    provideCompletionItems<span class="token operator">:</span> provideBlockCompletionItems<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string">"#"</span><span class="token punctuation">,</span>
  <span class="token string">"^"</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>Above is how Dendron attaches the completion provider for blocks. This part is straightforward, although note the symbols at the end. These are the symbols that when written will trigger your completion provider automatically. While you can define multiple symbols, each symbol has to be a single character. If An overview &#x26; tutorial of writing VSCode completion providers (intellisense) as an extension developer</p>
<p>Next, let's take a look at the completion function. Here is the function signature for Dendron:</p>
<pre class="language-ts"><code class="language-ts"><span class="token keyword module">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">provideBlockCompletionItems</span><span class="token punctuation">(</span>
  <span class="token dom variable">document</span><span class="token operator">:</span> <span class="token maybe-class-name">TextDocument</span><span class="token punctuation">,</span>
  position<span class="token operator">:</span> <span class="token maybe-class-name">Position</span><span class="token punctuation">,</span>
  token<span class="token operator">?</span><span class="token operator">:</span> <span class="token maybe-class-name">CancellationToken</span>
<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token known-class-name class-name">Promise</span><span class="token operator">&#x3C;</span><span class="token maybe-class-name">CompletionItem</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">|</span> <span class="token keyword nil">undefined</span><span class="token operator">></span> <span class="token punctuation">{</span>
</code></pre>
<p><code>document</code> and <code>position</code> are straightforward. <code>token</code> is used to cancel completions, for example if the user hits cancel while waiting for the completions. Key thing about the token is to remember that javascript is single-threaded: the token won't suddenly get cancelled in the middle of your function. The only point where it can become cancelled is if you <code>await</code> for something and yield the execution. This means you don't have to check if the token is cancelled everywhere in your code, just check after any <code>await</code>ed operation that might take a significant amount of time. Checking the token is easy, <code>if (token?.isCancellationRequested) return;</code> is enough.</p>
<p>The more important thing here is how the function gets called. One way the function will get called is if the user types one of the trigger symbols you registered. Another way is if the user hits the key for "Trigger Suggest" (<code>Ctrl+Space</code> by default), <em>all</em> registered completion providers for this language will run. Crucially, this means your completion provider may be activated at any point in the document, with or without your trigger key.
It's up to your implementation to check if the current <code>position</code> is somewhere that this completion is appropriate for, and <code>return;</code> if not. Let's look at a simplified version of how Dendron handles this for the autocomplete:</p>
<pre class="language-ts"><code class="language-ts"><span class="token keyword">let</span> found<span class="token operator">:</span> <span class="token maybe-class-name">RegExpMatchArray</span> <span class="token operator">|</span> <span class="token keyword nil">undefined</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> line <span class="token operator">=</span> <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">lineAt</span><span class="token punctuation">(</span>position<span class="token punctuation">.</span><span class="token property-access">line</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// There may be multiple links within this line</span>
<span class="token keyword">const</span> matches <span class="token operator">=</span> line<span class="token punctuation">.</span><span class="token property-access">text</span><span class="token punctuation">.</span><span class="token method function property-access">matchAll</span><span class="token punctuation">(</span><span class="token constant">LINK_WITH_BLOCK_REGEX</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword control-flow">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> match <span class="token keyword">of</span> matches<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>_<span class="token punctuation">.</span><span class="token method function property-access">isUndefined</span><span class="token punctuation">(</span>match<span class="token punctuation">.</span><span class="token property-access">groups</span><span class="token punctuation">)</span> <span class="token operator">||</span> _<span class="token punctuation">.</span><span class="token method function property-access">isUndefined</span><span class="token punctuation">(</span>match<span class="token punctuation">.</span><span class="token property-access">index</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword control-flow">continue</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> entireLink <span class="token punctuation">}</span> <span class="token operator">=</span> match<span class="token punctuation">.</span><span class="token property-access">groups</span><span class="token punctuation">;</span>
  <span class="token comment">// If the current position is within this link, then we are trying to complete it</span>
  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>
      match<span class="token punctuation">.</span><span class="token property-access">index</span> <span class="token operator">&#x3C;=</span> position<span class="token punctuation">.</span><span class="token property-access">character</span> <span class="token operator">&#x26;&#x26;</span>
      position<span class="token punctuation">.</span><span class="token property-access">character</span> <span class="token operator">&#x3C;=</span> match<span class="token punctuation">.</span><span class="token property-access">index</span> <span class="token operator">+</span> entireLink<span class="token punctuation">.</span><span class="token property-access">length</span>
  <span class="token punctuation">)</span> <span class="token punctuation">{</span>
      found <span class="token operator">=</span> match<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>_<span class="token punctuation">.</span><span class="token method function property-access">isUndefined</span><span class="token punctuation">(</span>found<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword control-flow">return</span><span class="token punctuation">;</span>
</code></pre>
<p>The gist of it is that we get the text for the current line, and check if the current position is inside a link with a block that we can complete.</p>
<h3 id="completionitem"><a aria-hidden="true" class="anchor-heading" href="#completionitem"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a><code>CompletionItem</code></h3>
<h4 id="label"><a aria-hidden="true" class="anchor-heading" href="#label"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a><code>label</code></h4>
<p>A key part of the completion item is the label. The label is not only displayed for the completion items, but it's also used as a default for many of the options in a <code>CompletionItem</code>. The text that gets inserted when the user selects something, deciding the order in which these items are displayed, and how these options are narrowed when the user types are all based on the label by default.</p>
<p><img src="https://i.imgur.com/Qu2LPJR.png" alt="A screen shot displaying several completion items. &#x22;journal.2021.06&#x22; is written within brackets, which is also highlighted in all completion items."></p>
<h4 id="range"><a aria-hidden="true" class="anchor-heading" href="#range"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a><code>range</code></h4>
<p>The range is the most confusing part of the <code>CompletionItem</code> in my opinion. The range determines 2 things: where the selected item will be inserted, and also what counts as "stuff that the user typed to narrow the items".</p>
<p>For the first use of range, whatever range you provide will be replaced with the <code>insertText</code> (or missing that, <code>label</code>) of the completion item. If you have nothing to replace, the range can have <code>start === end</code> in which case the text is just inserted at that point.</p>
<p>The second use of range makes things a bit more tricky. Because the range determines what counts as "stuff the user typed", you have to be careful about what you include in the range. For example, Dendron's autocomplete allows users to type <code>[[^</code> to get all blocks within a text as autocomplete options.</p>
<p>The problem? The user needs to type <code>^</code> to activate the completion, but <code>^</code> is not part of any completion item, and also <code>^</code> needs to be removed once an item is selected because the text is supposed to look like <code>[[#^something]]</code> after the completion. </p>
<p>While it would be convenient to just set the range to anything within the brackets, this will result in all completion items being narrowed out because <code>^</code> will also count as "stuff the user typed to narrow the items".</p>
<p>Something important to bring up here is the default for <code>range</code>. If you look
into the docs, you'll see that the default is the "range of the current word",
effectively the output of <code>TextDocument.getWordRangeAtPosition</code> function.
<code>getWordRangeAtPosition</code> allows you to set a custom regex to select what
"current word" means, so this might sound like a good way to calculate the
range. While this would work in some cases, I found that
<code>getWordRangeAtPosition</code> is extremely inefficient if your regex is more complex
than <code>[...]+</code>. Especially using lookaheads or lookbehinds causes VSCode to
completely hang. I'd recommend avoiding this function unless the default mostly
works for you.</p>
<h4 id="sorttext"><a aria-hidden="true" class="anchor-heading" href="#sorttext"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a><code>sortText</code></h4>
<p>This field is used to determine in what order the completion items are <em>initially</em> ordered. Initially is important here, as VSCode may move the items around once the user starts typing if it decides some items match the text better.</p>
<p>The annoying part about <code>sortText</code>: it simply sorts the items using basic string sorting. Issue here being that if you have a loop to generate your completion items, you can't just use the index to sort the items.</p>
<pre class="language-ts"><code class="language-ts">blocks<span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>block<span class="token punctuation">,</span> index<span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// These won't sort right, because "11" &#x3C; "9" in string sort</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">{</span>
    label<span class="token operator">:</span> block<span class="token punctuation">.</span><span class="token property-access">text</span><span class="token punctuation">,</span>
    sortText<span class="token operator">:</span> <span class="token known-class-name class-name">String</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>The fix is to pad your <code>sortText</code>.</p>
<pre class="language-ts"><code class="language-ts">sortText<span class="token operator">:</span> <span class="token known-class-name class-name">String</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">padStart</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">'0'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</code></pre>
<p>This is not a perfect fix of course, but it's unlikely that you'll have over 99999 completion items.</p>
<h4 id="inserttext"><a aria-hidden="true" class="anchor-heading" href="#inserttext"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a><code>insertText</code></h4>
<p>This is the text to be inserted when the user selects a completion. By default
it's set to the label, but you'll want to set this if you are using the label to
display something more informative to the user. For example, when completing
blocks, Dendron uses the label to display the actual line the user is selecting.
But the text we need to insert into the wikilink is not the same as the line
itself, so we set this to get it to link to the right place.</p>
<pre class="language-ts"><code class="language-ts">insertText<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">#</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token maybe-class-name">AnchorUtils</span><span class="token punctuation">.</span><span class="token method function property-access">anchor2string</span><span class="token punctuation">(</span>anchor<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
</code></pre>
<h4 id="additionaltextedits"><a aria-hidden="true" class="anchor-heading" href="#additionaltextedits"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a><code>additionalTextEdits</code></h4>
<p><code>insertText</code> replaces the part of the text that is selected by the <code>range</code>. This
is actually quite limiting: As I mentioned before, <code>range</code> not only selects the
what will be replaced but also what VSCode considers "typed by the user to
narrow options". What if you want something to be replaced along with what the
user typed, but you don't want it to be used in narrowing?</p>
<p>For example, when autocompleting for blocks in Dendron the user might type
<code>[[^some-header</code>, but the resulting link will look like
<code>[[#some-header-text-here]]</code>. We need to remove <code>^</code> along with whatever the user
typed, but if we set the <code>range</code> to include it then the narrowing would be
thrown off because it would look for options where the label includes <code>^</code>.
To get around this, we use the <code>additionalTextEdits</code> to automatically remove the
<code>^</code> part.</p>
<p>Another use for <code>additionalTextEdits</code> is to insert text somewhere completely
different in the document. Think of auto-imports for some languages, where you
type something and the language automatically adds <code>import ...</code>. Or in Dendron,
if the user selects a block that doesn't already have a block anchor when
completing blocks, we need to insert a block anchor there. <code>additionalTextEdits</code>
have no limits to where they can put the text, as long as it's within the same
document. In any case, let's see what this code looks like:</p>
<pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> edits<span class="token operator">:</span> <span class="token maybe-class-name">TextEdit</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>found<span class="token punctuation">.</span><span class="token property-access">groups</span><span class="token punctuation">.</span><span class="token property-access">trigger</span><span class="token punctuation">)</span> edits<span class="token punctuation">.</span><span class="token method function property-access">push</span><span class="token punctuation">(</span>
  <span class="token keyword">new</span> <span class="token class-name"><span class="token maybe-class-name">TextEdit</span></span><span class="token punctuation">(</span>
    <span class="token keyword">new</span> <span class="token class-name"><span class="token maybe-class-name">Range</span></span><span class="token punctuation">(</span>
      position<span class="token punctuation">.</span><span class="token property-access">line</span><span class="token punctuation">,</span> found<span class="token punctuation">.</span><span class="token property-access">index</span> <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">,</span>
      position<span class="token punctuation">.</span><span class="token property-access">line</span><span class="token punctuation">,</span> found<span class="token punctuation">.</span><span class="token property-access">index</span> <span class="token operator">+</span> <span class="token number">2</span> <span class="token operator">+</span> found<span class="token punctuation">.</span><span class="token property-access">groups</span><span class="token punctuation">.</span><span class="token property-access">trigger</span><span class="token punctuation">.</span><span class="token property-access">length</span>
    <span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token string">""</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>_<span class="token punctuation">.</span><span class="token method function property-access">isUndefined</span><span class="token punctuation">(</span>anchor<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  anchor <span class="token operator">=</span> <span class="token punctuation">{</span>
    type<span class="token operator">:</span> <span class="token string">"block"</span><span class="token punctuation">,</span>
    value<span class="token operator">:</span> <span class="token function">genUUIDInsecure</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> blockPosition <span class="token operator">=</span> <span class="token maybe-class-name">VSCodeUtils</span><span class="token punctuation">.</span><span class="token method function property-access">point2VSCodePosition</span><span class="token punctuation">(</span>
    block<span class="token punctuation">.</span><span class="token property-access">position</span><span class="token punctuation">.</span><span class="token property-access">end</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  edits<span class="token punctuation">.</span><span class="token method function property-access">push</span><span class="token punctuation">(</span>
    <span class="token keyword">new</span> <span class="token class-name"><span class="token maybe-class-name">TextEdit</span></span><span class="token punctuation">(</span>
      <span class="token keyword">new</span> <span class="token class-name"><span class="token maybe-class-name">Range</span></span><span class="token punctuation">(</span>blockPosition<span class="token punctuation">,</span> blockPosition<span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token maybe-class-name">AnchorUtils</span><span class="token punctuation">.</span><span class="token method function property-access">anchor2string</span><span class="token punctuation">(</span>anchor<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>The first part adds a text edit to remove the <code>^</code> part the user typed by
calculating the range from a regex match, then replacing it with <code>""</code>. The
second part adds the <code> ^...</code> part to a block by calculating the range from the
parsed document.</p>
<h2 id="conclusion"><a aria-hidden="true" class="anchor-heading" href="#conclusion"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Conclusion</h2>
<p>Autocomplete is a ubiquitous feature in text editing today, both for writing
natural languages and coding. It is an incredibly easy-to-use yet powerful
feature for your users, and it enables unmatched user experiences when done
right. But when done wrong, it can cause a disconnect and confusion around your
product. At Dendron, we strive for the former and hope that the learnings from
our experience will help you do the same.</p>
<hr>
<p></p><p></p><div class="portal-container">
<div class="portal-head">
<div class="portal-backlink">
<div class="portal-title">From <span class="portal-text-title">Subscribe</span></div>
<a href="/notes/jCoayBWmLrfn2W4WrOR9x" class="portal-arrow">Go to text <span class="right-arrow">→</span></a>
</div>
</div>
<div id="portal-parent-anchor" class="portal-parent" markdown="1">
<div class="portal-parent-fader-top"></div>
<div class="portal-parent-fader-bottom"></div><p>Enjoy the blog? Subscribe to our newsletter!</p>
<form action="https://buttondown.email/api/emails/embed-subscribe/dendron" method="post" target="popupwindow" onsubmit="window.open(&#x27;https://buttondown.email/dendron&#x27;, &#x27;popupwindow&#x27;)" class="embeddable-buttondown-form">
  <label for="bd-email">Enter your email</label>
  <input type="email" name="email" id="bd-email">
  <input type="submit" value="Subscribe">
  <p></p>
</form>
<p>Newsletters not your thing? You can also follow us elsewhere on the interwebs:</p>
<ul>
<li>Join <a href="https://discord.com/invite/xrKTUStHNZ">Dendron on Discord</a></li>
<li>Follow <a href="https://twitter.com/dendronhq">Dendron on Twitter</a></li>
<li>Checkout <a href="https://github.com/dendronhq">Dendron on GitHub</a></li>
</ul>
<hr>
<p>Interested in creating your own knowledge base using markdown, git, and VSCode? Get started with <a href="https://wiki.dendron.so/notes/678c77d9-ef2c-4537-97b5-64556d6337f1/">Dendron</a> today.</p>
</div></div><p></p><p></p></div></div></div></main><div class="ant-divider ant-divider-horizontal" role="separator"></div><footer class="ant-layout-footer" style="padding:0 24px 24px"></footer></section></section></section></section></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"note":{"id":"IThOx1Oag1r0JAglpiDLp","title":"Writing a Visual Studio Code Completion Provider","vault":{"fsPath":"vault"},"type":"note","desc":"","links":[{"type":"ref","from":{"fname":"blog.2021.2021-09-20-writing-a-visual-studio-code-completion-provider","id":"IThOx1Oag1r0JAglpiDLp","vaultName":"vault"},"value":"blog.subscribe","position":{"start":{"line":199,"column":1,"offset":10835},"end":{"line":199,"column":20,"offset":10854},"indent":[]},"xvault":false,"to":{"fname":"blog.subscribe"}}],"anchors":{"entry-point":{"type":"header","text":"Entry point","value":"entry-point","line":21,"column":0},"":{"type":"header","text":"","value":"","line":75,"column":0},"-1":{"type":"header","text":"","value":"-1","line":76,"column":0},"-2":{"type":"header","text":"","value":"-2","line":82,"column":0},"-3":{"type":"header","text":"","value":"-3","line":105,"column":0},"-4":{"type":"header","text":"","value":"-4","line":129,"column":0},"-5":{"type":"header","text":"","value":"-5","line":142,"column":0},"conclusion":{"type":"header","text":"Conclusion","value":"conclusion","line":201,"column":0}},"fname":"blog.2021.2021-09-20-writing-a-visual-studio-code-completion-provider","updated":1635291240822,"created":1631857825780,"parent":"ZWue5PCs0tM3YyoS0MI-x","children":[],"data":{},"contentHash":"a9a754e4543ac8b8cf301fb5fa70ec2e","custom":{"date":"2021-09-20","excerpt":"An overview of writing VSCode completion providers (intellisense) as an extension developer"},"image":{"url":"https://i.imgur.com/Qu2LPJR.png","alt":"VSCode Auto completion"}},"body":"\u003ch1 id=\"writing-a-visual-studio-code-completion-provider\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading\" href=\"#writing-a-visual-studio-code-completion-provider\"\u003e\u003csvg aria-hidden=\"true\" viewBox=\"0 0 16 16\"\u003e\u003cuse xlink:href=\"#svg-link\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/a\u003eWriting a Visual Studio Code Completion Provider\u003c/h1\u003e\n\u003cp\u003e\u003cimg src=\"https://org-dendron-public-assets.s3.amazonaws.com/images/pexels-thisisengineering-3861972.jpg\" alt=\"A photo of a developer with a laptop and 2 monitors, from a top-down view. Monitors display Visual Studio Code windows.\"\u003e\u003c/p\u003e\n\u003cp\u003eVisual Studio Code (VSCode) provides many powerful features for extension developers. Autocomplete, warnings, tasks, and many more features are included out-of-the-box and are available for extension developers to take advantage of. However, figuring out how you can take advantage of these features as an extension developer can require digging through API documentation to learn the exact behavior. Using the API incorrectly can lead to issues that are hard to debug, as I learned working on the block autocomplete feature for Dendron.\u003c/p\u003e\n\u003cp\u003eThis post is an overview of VSCode autocomplete —also called intellisense— feature from the viewpoint of an extension developer. I especially want to highlight a few pitfalls: VSCode provides defaults for many of the options around autocomplete, but the behavior of these defaults can be confusing if you don't know what they are.\u003c/p\u003e\n\u003ch3 id=\"entry-point\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading\" href=\"#entry-point\"\u003e\u003csvg aria-hidden=\"true\" viewBox=\"0 0 16 16\"\u003e\u003cuse xlink:href=\"#svg-link\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/a\u003eEntry point\u003c/h3\u003e\n\u003cp\u003eYour entry point into adding an autocomplete feature is \u003ccode\u003elanguages.registerCompletionItemProvider\u003c/code\u003e. This allows you to attach a function that will generate the options when requested.\u003c/p\u003e\n\u003cpre class=\"language-ts\"\u003e\u003ccode class=\"language-ts\"\u003elanguages\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003eregisterCompletionItemProvider\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\n  \u003cspan class=\"token string\"\u003e\"markdown\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    provideCompletionItems\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e provideBlockCompletionItems\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"token string\"\u003e\"#\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"token string\"\u003e\"^\"\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAbove is how Dendron attaches the completion provider for blocks. This part is straightforward, although note the symbols at the end. These are the symbols that when written will trigger your completion provider automatically. While you can define multiple symbols, each symbol has to be a single character. If An overview \u0026#x26; tutorial of writing VSCode completion providers (intellisense) as an extension developer\u003c/p\u003e\n\u003cp\u003eNext, let's take a look at the completion function. Here is the function signature for Dendron:\u003c/p\u003e\n\u003cpre class=\"language-ts\"\u003e\u003ccode class=\"language-ts\"\u003e\u003cspan class=\"token keyword module\"\u003eexport\u003c/span\u003e \u003cspan class=\"token keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"token function\"\u003eprovideBlockCompletionItems\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\n  \u003cspan class=\"token dom variable\"\u003edocument\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003eTextDocument\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  position\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003ePosition\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  token\u003cspan class=\"token operator\"\u003e?\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003eCancellationToken\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token known-class-name class-name\"\u003ePromise\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token maybe-class-name\"\u003eCompletionItem\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e \u003cspan class=\"token keyword nil\"\u003eundefined\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003ccode\u003edocument\u003c/code\u003e and \u003ccode\u003eposition\u003c/code\u003e are straightforward. \u003ccode\u003etoken\u003c/code\u003e is used to cancel completions, for example if the user hits cancel while waiting for the completions. Key thing about the token is to remember that javascript is single-threaded: the token won't suddenly get cancelled in the middle of your function. The only point where it can become cancelled is if you \u003ccode\u003eawait\u003c/code\u003e for something and yield the execution. This means you don't have to check if the token is cancelled everywhere in your code, just check after any \u003ccode\u003eawait\u003c/code\u003eed operation that might take a significant amount of time. Checking the token is easy, \u003ccode\u003eif (token?.isCancellationRequested) return;\u003c/code\u003e is enough.\u003c/p\u003e\n\u003cp\u003eThe more important thing here is how the function gets called. One way the function will get called is if the user types one of the trigger symbols you registered. Another way is if the user hits the key for \"Trigger Suggest\" (\u003ccode\u003eCtrl+Space\u003c/code\u003e by default), \u003cem\u003eall\u003c/em\u003e registered completion providers for this language will run. Crucially, this means your completion provider may be activated at any point in the document, with or without your trigger key.\nIt's up to your implementation to check if the current \u003ccode\u003eposition\u003c/code\u003e is somewhere that this completion is appropriate for, and \u003ccode\u003ereturn;\u003c/code\u003e if not. Let's look at a simplified version of how Dendron handles this for the autocomplete:\u003c/p\u003e\n\u003cpre class=\"language-ts\"\u003e\u003ccode class=\"language-ts\"\u003e\u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e found\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003eRegExpMatchArray\u003c/span\u003e \u003cspan class=\"token operator\"\u003e|\u003c/span\u003e \u003cspan class=\"token keyword nil\"\u003eundefined\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e line \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token dom variable\"\u003edocument\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003elineAt\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eposition\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003eline\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token comment\"\u003e// There may be multiple links within this line\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e matches \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e line\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003etext\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003ematchAll\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token constant\"\u003eLINK_WITH_BLOCK_REGEX\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword control-flow\"\u003efor\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e match \u003cspan class=\"token keyword\"\u003eof\u003c/span\u003e matches\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token keyword control-flow\"\u003eif\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e_\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003eisUndefined\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ematch\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003egroups\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e||\u003c/span\u003e _\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003eisUndefined\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ematch\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003eindex\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token keyword control-flow\"\u003econtinue\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e entireLink \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e match\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003egroups\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"token comment\"\u003e// If the current position is within this link, then we are trying to complete it\u003c/span\u003e\n  \u003cspan class=\"token keyword control-flow\"\u003eif\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\n      match\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003eindex\u003c/span\u003e \u003cspan class=\"token operator\"\u003e\u0026#x3C;=\u003c/span\u003e position\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003echaracter\u003c/span\u003e \u003cspan class=\"token operator\"\u003e\u0026#x26;\u0026#x26;\u003c/span\u003e\n      position\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003echaracter\u003c/span\u003e \u003cspan class=\"token operator\"\u003e\u0026#x3C;=\u003c/span\u003e match\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003eindex\u003c/span\u003e \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e entireLink\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003elength\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n      found \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e match\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token keyword control-flow\"\u003eif\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e_\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003eisUndefined\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003efound\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token keyword control-flow\"\u003ereturn\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThe gist of it is that we get the text for the current line, and check if the current position is inside a link with a block that we can complete.\u003c/p\u003e\n\u003ch3 id=\"completionitem\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading\" href=\"#completionitem\"\u003e\u003csvg aria-hidden=\"true\" viewBox=\"0 0 16 16\"\u003e\u003cuse xlink:href=\"#svg-link\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/a\u003e\u003ccode\u003eCompletionItem\u003c/code\u003e\u003c/h3\u003e\n\u003ch4 id=\"label\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading\" href=\"#label\"\u003e\u003csvg aria-hidden=\"true\" viewBox=\"0 0 16 16\"\u003e\u003cuse xlink:href=\"#svg-link\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/a\u003e\u003ccode\u003elabel\u003c/code\u003e\u003c/h4\u003e\n\u003cp\u003eA key part of the completion item is the label. The label is not only displayed for the completion items, but it's also used as a default for many of the options in a \u003ccode\u003eCompletionItem\u003c/code\u003e. The text that gets inserted when the user selects something, deciding the order in which these items are displayed, and how these options are narrowed when the user types are all based on the label by default.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"https://i.imgur.com/Qu2LPJR.png\" alt=\"A screen shot displaying several completion items. \u0026#x22;journal.2021.06\u0026#x22; is written within brackets, which is also highlighted in all completion items.\"\u003e\u003c/p\u003e\n\u003ch4 id=\"range\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading\" href=\"#range\"\u003e\u003csvg aria-hidden=\"true\" viewBox=\"0 0 16 16\"\u003e\u003cuse xlink:href=\"#svg-link\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/a\u003e\u003ccode\u003erange\u003c/code\u003e\u003c/h4\u003e\n\u003cp\u003eThe range is the most confusing part of the \u003ccode\u003eCompletionItem\u003c/code\u003e in my opinion. The range determines 2 things: where the selected item will be inserted, and also what counts as \"stuff that the user typed to narrow the items\".\u003c/p\u003e\n\u003cp\u003eFor the first use of range, whatever range you provide will be replaced with the \u003ccode\u003einsertText\u003c/code\u003e (or missing that, \u003ccode\u003elabel\u003c/code\u003e) of the completion item. If you have nothing to replace, the range can have \u003ccode\u003estart === end\u003c/code\u003e in which case the text is just inserted at that point.\u003c/p\u003e\n\u003cp\u003eThe second use of range makes things a bit more tricky. Because the range determines what counts as \"stuff the user typed\", you have to be careful about what you include in the range. For example, Dendron's autocomplete allows users to type \u003ccode\u003e[[^\u003c/code\u003e to get all blocks within a text as autocomplete options.\u003c/p\u003e\n\u003cp\u003eThe problem? The user needs to type \u003ccode\u003e^\u003c/code\u003e to activate the completion, but \u003ccode\u003e^\u003c/code\u003e is not part of any completion item, and also \u003ccode\u003e^\u003c/code\u003e needs to be removed once an item is selected because the text is supposed to look like \u003ccode\u003e[[#^something]]\u003c/code\u003e after the completion. \u003c/p\u003e\n\u003cp\u003eWhile it would be convenient to just set the range to anything within the brackets, this will result in all completion items being narrowed out because \u003ccode\u003e^\u003c/code\u003e will also count as \"stuff the user typed to narrow the items\".\u003c/p\u003e\n\u003cp\u003eSomething important to bring up here is the default for \u003ccode\u003erange\u003c/code\u003e. If you look\ninto the docs, you'll see that the default is the \"range of the current word\",\neffectively the output of \u003ccode\u003eTextDocument.getWordRangeAtPosition\u003c/code\u003e function.\n\u003ccode\u003egetWordRangeAtPosition\u003c/code\u003e allows you to set a custom regex to select what\n\"current word\" means, so this might sound like a good way to calculate the\nrange. While this would work in some cases, I found that\n\u003ccode\u003egetWordRangeAtPosition\u003c/code\u003e is extremely inefficient if your regex is more complex\nthan \u003ccode\u003e[...]+\u003c/code\u003e. Especially using lookaheads or lookbehinds causes VSCode to\ncompletely hang. I'd recommend avoiding this function unless the default mostly\nworks for you.\u003c/p\u003e\n\u003ch4 id=\"sorttext\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading\" href=\"#sorttext\"\u003e\u003csvg aria-hidden=\"true\" viewBox=\"0 0 16 16\"\u003e\u003cuse xlink:href=\"#svg-link\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/a\u003e\u003ccode\u003esortText\u003c/code\u003e\u003c/h4\u003e\n\u003cp\u003eThis field is used to determine in what order the completion items are \u003cem\u003einitially\u003c/em\u003e ordered. Initially is important here, as VSCode may move the items around once the user starts typing if it decides some items match the text better.\u003c/p\u003e\n\u003cp\u003eThe annoying part about \u003ccode\u003esortText\u003c/code\u003e: it simply sorts the items using basic string sorting. Issue here being that if you have a loop to generate your completion items, you can't just use the index to sort the items.\u003c/p\u003e\n\u003cpre class=\"language-ts\"\u003e\u003ccode class=\"language-ts\"\u003eblocks\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003emap\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eblock\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e index\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token arrow operator\"\u003e=\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token comment\"\u003e// These won't sort right, because \"11\" \u0026#x3C; \"9\" in string sort\u003c/span\u003e\n  \u003cspan class=\"token keyword control-flow\"\u003ereturn\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    label\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e block\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003etext\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n    sortText\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token known-class-name class-name\"\u003eString\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eindex\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThe fix is to pad your \u003ccode\u003esortText\u003c/code\u003e.\u003c/p\u003e\n\u003cpre class=\"language-ts\"\u003e\u003ccode class=\"language-ts\"\u003esortText\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token known-class-name class-name\"\u003eString\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eindex\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003epadStart\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e5\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token string\"\u003e'0'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThis is not a perfect fix of course, but it's unlikely that you'll have over 99999 completion items.\u003c/p\u003e\n\u003ch4 id=\"inserttext\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading\" href=\"#inserttext\"\u003e\u003csvg aria-hidden=\"true\" viewBox=\"0 0 16 16\"\u003e\u003cuse xlink:href=\"#svg-link\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/a\u003e\u003ccode\u003einsertText\u003c/code\u003e\u003c/h4\u003e\n\u003cp\u003eThis is the text to be inserted when the user selects a completion. By default\nit's set to the label, but you'll want to set this if you are using the label to\ndisplay something more informative to the user. For example, when completing\nblocks, Dendron uses the label to display the actual line the user is selecting.\nBut the text we need to insert into the wikilink is not the same as the line\nitself, so we set this to get it to link to the right place.\u003c/p\u003e\n\u003cpre class=\"language-ts\"\u003e\u003ccode class=\"language-ts\"\u003einsertText\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token template-string\"\u003e\u003cspan class=\"token template-punctuation string\"\u003e`\u003c/span\u003e\u003cspan class=\"token string\"\u003e#\u003c/span\u003e\u003cspan class=\"token interpolation\"\u003e\u003cspan class=\"token interpolation-punctuation punctuation\"\u003e${\u003c/span\u003e\u003cspan class=\"token maybe-class-name\"\u003eAnchorUtils\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003eanchor2string\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eanchor\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token interpolation-punctuation punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token template-punctuation string\"\u003e`\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch4 id=\"additionaltextedits\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading\" href=\"#additionaltextedits\"\u003e\u003csvg aria-hidden=\"true\" viewBox=\"0 0 16 16\"\u003e\u003cuse xlink:href=\"#svg-link\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/a\u003e\u003ccode\u003eadditionalTextEdits\u003c/code\u003e\u003c/h4\u003e\n\u003cp\u003e\u003ccode\u003einsertText\u003c/code\u003e replaces the part of the text that is selected by the \u003ccode\u003erange\u003c/code\u003e. This\nis actually quite limiting: As I mentioned before, \u003ccode\u003erange\u003c/code\u003e not only selects the\nwhat will be replaced but also what VSCode considers \"typed by the user to\nnarrow options\". What if you want something to be replaced along with what the\nuser typed, but you don't want it to be used in narrowing?\u003c/p\u003e\n\u003cp\u003eFor example, when autocompleting for blocks in Dendron the user might type\n\u003ccode\u003e[[^some-header\u003c/code\u003e, but the resulting link will look like\n\u003ccode\u003e[[#some-header-text-here]]\u003c/code\u003e. We need to remove \u003ccode\u003e^\u003c/code\u003e along with whatever the user\ntyped, but if we set the \u003ccode\u003erange\u003c/code\u003e to include it then the narrowing would be\nthrown off because it would look for options where the label includes \u003ccode\u003e^\u003c/code\u003e.\nTo get around this, we use the \u003ccode\u003eadditionalTextEdits\u003c/code\u003e to automatically remove the\n\u003ccode\u003e^\u003c/code\u003e part.\u003c/p\u003e\n\u003cp\u003eAnother use for \u003ccode\u003eadditionalTextEdits\u003c/code\u003e is to insert text somewhere completely\ndifferent in the document. Think of auto-imports for some languages, where you\ntype something and the language automatically adds \u003ccode\u003eimport ...\u003c/code\u003e. Or in Dendron,\nif the user selects a block that doesn't already have a block anchor when\ncompleting blocks, we need to insert a block anchor there. \u003ccode\u003eadditionalTextEdits\u003c/code\u003e\nhave no limits to where they can put the text, as long as it's within the same\ndocument. In any case, let's see what this code looks like:\u003c/p\u003e\n\u003cpre class=\"language-ts\"\u003e\u003ccode class=\"language-ts\"\u003e\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e edits\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003eTextEdit\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token keyword control-flow\"\u003eif\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003efound\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003egroups\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003etrigger\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e edits\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003epush\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\n  \u003cspan class=\"token keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"token class-name\"\u003e\u003cspan class=\"token maybe-class-name\"\u003eTextEdit\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"token class-name\"\u003e\u003cspan class=\"token maybe-class-name\"\u003eRange\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\n      position\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003eline\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e found\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003eindex\u003c/span\u003e \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e \u003cspan class=\"token number\"\u003e2\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n      position\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003eline\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e found\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003eindex\u003c/span\u003e \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e \u003cspan class=\"token number\"\u003e2\u003c/span\u003e \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e found\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003egroups\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003etrigger\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003elength\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"token string\"\u003e\"\"\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token keyword control-flow\"\u003eif\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e_\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003eisUndefined\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eanchor\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  anchor \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    type\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"block\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n    value\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token function\"\u003egenUUIDInsecure\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e blockPosition \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003eVSCodeUtils\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003epoint2VSCodePosition\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\n    block\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003eposition\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003eend\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  edits\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003epush\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"token class-name\"\u003e\u003cspan class=\"token maybe-class-name\"\u003eTextEdit\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\n      \u003cspan class=\"token keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"token class-name\"\u003e\u003cspan class=\"token maybe-class-name\"\u003eRange\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eblockPosition\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e blockPosition\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n      \u003cspan class=\"token template-string\"\u003e\u003cspan class=\"token template-punctuation string\"\u003e`\u003c/span\u003e\u003cspan class=\"token string\"\u003e \u003c/span\u003e\u003cspan class=\"token interpolation\"\u003e\u003cspan class=\"token interpolation-punctuation punctuation\"\u003e${\u003c/span\u003e\u003cspan class=\"token maybe-class-name\"\u003eAnchorUtils\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003eanchor2string\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eanchor\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token interpolation-punctuation punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token template-punctuation string\"\u003e`\u003c/span\u003e\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThe first part adds a text edit to remove the \u003ccode\u003e^\u003c/code\u003e part the user typed by\ncalculating the range from a regex match, then replacing it with \u003ccode\u003e\"\"\u003c/code\u003e. The\nsecond part adds the \u003ccode\u003e ^...\u003c/code\u003e part to a block by calculating the range from the\nparsed document.\u003c/p\u003e\n\u003ch2 id=\"conclusion\"\u003e\u003ca aria-hidden=\"true\" class=\"anchor-heading\" href=\"#conclusion\"\u003e\u003csvg aria-hidden=\"true\" viewBox=\"0 0 16 16\"\u003e\u003cuse xlink:href=\"#svg-link\"\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/a\u003eConclusion\u003c/h2\u003e\n\u003cp\u003eAutocomplete is a ubiquitous feature in text editing today, both for writing\nnatural languages and coding. It is an incredibly easy-to-use yet powerful\nfeature for your users, and it enables unmatched user experiences when done\nright. But when done wrong, it can cause a disconnect and confusion around your\nproduct. At Dendron, we strive for the former and hope that the learnings from\nour experience will help you do the same.\u003c/p\u003e\n\u003chr\u003e\n\u003cp\u003e\u003c/p\u003e\u003cp\u003e\u003c/p\u003e\u003cdiv class=\"portal-container\"\u003e\n\u003cdiv class=\"portal-head\"\u003e\n\u003cdiv class=\"portal-backlink\"\u003e\n\u003cdiv class=\"portal-title\"\u003eFrom \u003cspan class=\"portal-text-title\"\u003eSubscribe\u003c/span\u003e\u003c/div\u003e\n\u003ca href=\"/notes/jCoayBWmLrfn2W4WrOR9x\" class=\"portal-arrow\"\u003eGo to text \u003cspan class=\"right-arrow\"\u003e→\u003c/span\u003e\u003c/a\u003e\n\u003c/div\u003e\n\u003c/div\u003e\n\u003cdiv id=\"portal-parent-anchor\" class=\"portal-parent\" markdown=\"1\"\u003e\n\u003cdiv class=\"portal-parent-fader-top\"\u003e\u003c/div\u003e\n\u003cdiv class=\"portal-parent-fader-bottom\"\u003e\u003c/div\u003e\u003cp\u003eEnjoy the blog? Subscribe to our newsletter!\u003c/p\u003e\n\u003cform action=\"https://buttondown.email/api/emails/embed-subscribe/dendron\" method=\"post\" target=\"popupwindow\" onsubmit=\"window.open(\u0026#x27;https://buttondown.email/dendron\u0026#x27;, \u0026#x27;popupwindow\u0026#x27;)\" class=\"embeddable-buttondown-form\"\u003e\n  \u003clabel for=\"bd-email\"\u003eEnter your email\u003c/label\u003e\n  \u003cinput type=\"email\" name=\"email\" id=\"bd-email\"\u003e\n  \u003cinput type=\"submit\" value=\"Subscribe\"\u003e\n  \u003cp\u003e\u003c/p\u003e\n\u003c/form\u003e\n\u003cp\u003eNewsletters not your thing? You can also follow us elsewhere on the interwebs:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eJoin \u003ca href=\"https://discord.com/invite/xrKTUStHNZ\"\u003eDendron on Discord\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003eFollow \u003ca href=\"https://twitter.com/dendronhq\"\u003eDendron on Twitter\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003eCheckout \u003ca href=\"https://github.com/dendronhq\"\u003eDendron on GitHub\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003cp\u003eInterested in creating your own knowledge base using markdown, git, and VSCode? Get started with \u003ca href=\"https://wiki.dendron.so/notes/678c77d9-ef2c-4537-97b5-64556d6337f1/\"\u003eDendron\u003c/a\u003e today.\u003c/p\u003e\n\u003c/div\u003e\u003c/div\u003e\u003cp\u003e\u003c/p\u003e\u003cp\u003e\u003c/p\u003e","noteIndex":{"id":"URjjrrJOy0JEJjukmZaaa","title":"Blog","vault":{"fsPath":"vault"},"type":"note","desc":"","links":[{"type":"ref","from":{"fname":"blog","id":"URjjrrJOy0JEJjukmZaaa","vaultName":"vault"},"value":"blog.subscribe","position":{"start":{"line":13,"column":1,"offset":186},"end":{"line":13,"column":20,"offset":205},"indent":[]},"xvault":false,"to":{"fname":"blog.subscribe"}}],"anchors":{"welcome-":{"type":"header","text":"Welcome 👋","value":"welcome-","line":9,"column":0}},"fname":"blog","updated":1635291290118,"created":1624123322073,"parent":null,"children":["URjjrrJOy0JEJjukmZLdc","ZWue5PCs0tM3YyoS0MI-x","jCoayBWmLrfn2W4WrOR9x"],"data":{},"contentHash":"4a810d7d5b7f463f049394fc49038ede","custom":{"nav_order":0,"permalink":"/"},"body":"\n\n## Welcome 👋\n\nThis is the Dendron Blog. \n\nDendron helps developers organize information at scale. \n\nThis blog is where we share our learnings and reflections from our journey! \n\n---\n\n![[blog.subscribe]]","schema":{"schemaId":"blog","moduleId":"blog"}},"collectionChildren":null,"customHeadContent":null,"config":{"version":3,"useFMTitle":true,"useNoteTitleForLink":true,"noLegacyNoteRef":true,"mermaid":true,"useKatex":true,"usePrettyRefs":true,"dev":{"enablePreviewV2":true},"site":{"previewPort":8081,"ga_tracking":"G-15EVNLBT2H","siteIndex":"blog","siteHierarchies":["blog"],"siteRootDir":"docs","gh_edit_repository":"https://github.com/dendronhq/dendron-blog","usePrettyRefs":true,"copyAssets":true,"siteUrl":"https://blog.dendron.so","siteLastModified":true,"githubCname":"blog.dendron.so","title":"Dendron Blog","author":"dendronhq","twitter":"dendronhq","description":"Blog for Dendron","gh_edit_branch":"main","usePrettyLinks":true,"siteNotesDir":"notes","siteFaviconPath":"favicon.ico","gh_edit_link":true,"gh_edit_link_text":"Edit this page on GitHub","gh_root":"docs/","gh_edit_view_mode":"edit","writeStubs":true},"commands":{"lookup":{"note":{"selectionMode":"extract","confirmVaultOnCreate":false,"leaveTrace":false}},"insertNote":{"initialValue":"templates"},"insertNoteLink":{"aliasMode":"none","enableMultiSelect":false},"insertNoteIndex":{"enableMarker":false},"randomNote":{}},"workspace":{"dendronVersion":"0.64.1","vaults":[{"fsPath":"vault"}],"journal":{"dailyDomain":"daily","name":"journal","dateFormat":"y.MM.dd","addBehavior":"childOfDomain"},"scratch":{"name":"scratch","dateFormat":"y.MM.dd.HHmmss","addBehavior":"asOwnDomain"},"graph":{"zoomSpeed":1},"enableAutoCreateOnDefinition":false,"enableXVaultWikiLink":false,"enableRemoteVaultInit":true,"workspaceVaultSyncMode":"noCommit","enableAutoFoldFrontmatter":true,"maxPreviewsCached":10,"maxNoteLength":204800,"enableUserTags":true,"enableHashTags":true}}},"__N_SSG":true},"page":"/notes/[id]","query":{"id":"IThOx1Oag1r0JAglpiDLp"},"buildId":"eGF8yDdSuflwTya4OC_9B","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>